// Translation strings for English and Vietnamese
const translations = {
    en: {
        who: "Who I Am",
        desc: "I'm Nguyen Trong Duc - a <strong>software engineering student</strong> with a relentless curiosity for <strong>coding, problem-solving, and system exploration</strong>. From algorithm competitions to deep-diving into the mechanics of software, I thrive on understanding how things work beneath the surface.",
        project: "Top Project",
        subtitle: "A Passionate Self-Taught Coder",
        donate: "Support Me",
        openSource: "An open source extension",
        myProjects: "My Projects",
        privacyPolicy: "Privacy Policy",
        privacyPolicyTitle: "Privacy Policy",
        privacyPolicyDesc: `
            At Duck CIT, I am committed to protecting your privacy. This Privacy Policy explains how I collect, use, and safeguard your information when you visit my website or use my services.
            <br><br>
            <strong>1. Information I Collect</strong><br>
            I may collect personal information such as your name and email address when you submit a question via the contact form. Additionally, I may collect non-personal information like browser type, IP address, and usage data through cookies to improve your experience.
            <br><br>
            <strong>2. How I Use Your Information</strong><br>
            Your information is used to respond to your inquiries, improve my website, and analyze usage patterns. I do not sell or share your personal information with third parties, except as required by law.
            <br><br>
            <strong>3. Cookies</strong><br>
            This website uses cookies to enhance your browsing experience. You can disable cookies in your browser settings, but this may affect the functionality of the site.
            <br><br>
            <strong>4. Security</strong><br>
            I take reasonable measures to protect your information from unauthorized access or disclosure. However, no method of transmission over the internet is 100% secure.
            <br><br>
            <strong>5. Changes to This Policy</strong><br>
            I may update this Privacy Policy from time to time. Any changes will be posted on this page with an updated date.
            <br><br>
            If you have any questions about this Privacy Policy, please contact me via the "Ask a Question" link in the footer.
        `,
        termsOfUse: "Terms of Use",
        termsOfUseTitle: "Terms of Use",
        termsOfUseDesc: `
            Welcome to Duck CIT! These Terms of Use govern your use of my website and services. By accessing this website, you agree to comply with these terms.
            <br><br>
            <strong>1. Use of the Website</strong><br>
            You may use this website for personal, non-commercial purposes. You agree not to use the site for any unlawful activities or to harm its functionality.
            <br><br>
            <strong>2. Intellectual Property</strong><br>
            All content on this website, including text, images, and code, is my property or used with permission. You may not reproduce, distribute, or modify any content without my consent.
            <br><br>
            <strong>3. Limitation of Liability</strong><br>
            I am not liable for any damages arising from your use of this website, including but not limited to data loss or service interruptions.
            <br><br>
            <strong>4. Third-Party Links</strong><br>
            This website may contain links to third-party sites. I am not responsible for the content or practices of these sites.
            <br><br>
            <strong>5. Changes to These Terms</strong><br>
            I may update these Terms of Use from time to time. Any changes will be posted on this page with an updated date.
            <br><br>
            If you have any questions about these Terms of Use, please contact me via the "Ask a Question" link in the footer.
        `,
        askQuestion: "Let's Connect",
        copyright: "© 2025 Duck CIT",
        modalTitle: "Let's Connect",
        modalDesc: "I'd love to hear from you! Whether you have a question, want to collaborate, or just want to say hello, feel free to reach out. I'll get back to you as soon as possible.",
        namePlaceholder: "Your name",
        emailPlaceholder: "Your email",
        questionPlaceholder: "Your question",
        submitButton: "Send question",
        pricingTitle: "Pricing",
        pricingSubtitle: "Unlock access to all of my creative projects",
        pricingCurrency: "$",
        pricingPrice: "0",
        pricingDescription: "Completely free, now and forever - including all future updates",
        pricingNote: "* If you'd like to show some love, a $1 donation would make my day (but no pressure, really).",
        projectsTitle: "My Projects",
        projectsLoading: "Loading projects...",
        projectsError: "Error loading projects. Please try again later.",
        noDescription: "No description available",
        viewOnGitHub: "View on GitHub",
        stars: "stars",
        forks: "forks"
    },
    vi: {
        who: "Tôi Là Ai",
        desc: "Tôi là Nguyễn Trọng Đức - một <strong>sinh viên kỹ thuật phần mềm</strong> mê code, thích giải quyết vấn đề và luôn tò mò muốn khám phá sâu vào các hệ thống. Từ việc tham gia thi đấu thuật toán đến mày mò tìm hiểu cách phần mềm vận hành, tôi thích thú với việc hiểu rõ mọi thứ hoạt động ra sao bên trong chúng.",
        project: "Dự Án Tiêu Biểu",
        subtitle: "Một Lập Trình Viên Tự Học Đầy Đam Mê",
        donate: "Ủng Hộ Tôi",
        openSource: "Một tiện ích mã nguồn mở",
        myProjects: "Dự Án Của Tôi",
        privacyPolicy: "Chính sách Quyền Riêng tư",
        privacyPolicyTitle: "Chính sách Quyền Riêng tư",
        privacyPolicyDesc: `
            Tại Duck CIT, tôi cam kết bảo vệ quyền riêng tư của bạn. Chính sách Quyền Riêng tư này giải thích cách tôi thu thập, sử dụng và bảo vệ thông tin của bạn khi bạn truy cập trang web hoặc sử dụng dịch vụ của tôi.
            <br><br>
            <strong>1. Thông tin tôi thu thập</strong><br>
            Tôi có thể thu thập thông tin cá nhân như tên và địa chỉ email của bạn khi bạn gửi câu hỏi qua biểu mẫu liên hệ. Ngoài ra, tôi có thể thu thập thông tin không cá nhân như loại trình duyệt, địa chỉ IP và dữ liệu sử dụng thông qua cookie để cải thiện trải nghiệm của bạn.
            <br><br>
            <strong>2. Cách tôi sử dụng thông tin của bạn</strong><br>
            Thông tin của bạn được sử dụng để trả lời các câu hỏi, cải thiện trang web và phân tích mô hình sử dụng. Tôi không bán hoặc chia sẻ thông tin cá nhân của bạn với bên thứ ba, trừ khi luật pháp yêu cầu.
            <br><br>
            <strong>3. Cookie</strong><br>
            Trang web này sử dụng cookie để nâng cao trải nghiệm duyệt web của bạn. Bạn có thể tắt cookie trong cài đặt trình duyệt, nhưng điều này có thể ảnh hưởng đến chức năng của trang.
            <br><br>
            <strong>4. Bảo mật</strong><br>
            Tôi áp dụng các biện pháp hợp lý để bảo vệ thông tin của bạn khỏi truy cập hoặc tiết lộ trái phép. Tuy nhiên, không có phương thức truyền tải nào qua internet là an toàn 100%.
            <br><br>
            <strong>5. Thay đổi chính sách này</strong><br>
            Tôi có thể cập nhật Chính sách Quyền Riêng tư này theo thời gian. Mọi thay đổi sẽ được đăng trên trang này với ngày cập nhật mới.
            <br><br>
            Nếu bạn có bất kỳ câu hỏi nào về Chính sách Quyền Riêng tư này, vui lòng liên hệ với tôi qua liên kết "Gửi Câu Hỏi" ở footer.
        `,
        termsOfUse: "Điều khoản Sử dụng",
        termsOfUseTitle: "Điều khoản Sử dụng",
        termsOfUseDesc: `
            Chào mừng đến với Duck CIT! Các Điều khoản Sử dụng này điều chỉnh việc bạn sử dụng trang web và dịch vụ của tôi. Bằng cách truy cập trang web này, bạn đồng ý tuân thủ các điều khoản này.
            <br><br>
            <strong>1. Sử dụng trang web</strong><br>
            Bạn có thể sử dụng trang web này cho mục đích cá nhân, không thương mại. Bạn đồng ý không sử dụng trang web cho bất kỳ hoạt động bất hợp pháp nào hoặc làm tổn hại đến chức năng của nó.
            <br><br>
            <strong>2. Quyền sở hữu trí tuệ</strong><br>
            Tất cả nội dung trên trang web này, bao gồm văn bản, hình ảnh và mã nguồn, đều thuộc sở hữu của tôi hoặc được sử dụng với sự cho phép. Bạn không được sao chép, phân phối hoặc chỉnh sửa bất kỳ nội dung nào mà không có sự đồng ý của tôi.
            <br><br>
            <strong>3. Giới hạn trách nhiệm</strong><br>
            Tôi không chịu trách nhiệm cho bất kỳ thiệt hại nào phát sinh từ việc bạn sử dụng trang web này, bao gồm nhưng không giới hạn ở mất dữ liệu hoặc gián đoạn dịch vụ.
            <br><br>
            <strong>4. Liên kết bên thứ ba</strong><br>
            Trang web này có thể chứa liên kết đến các trang web bên thứ ba. Tôi không chịu trách nhiệm về nội dung hoặc hoạt động của các trang web này.
            <br><br>
            <strong>5. Thay đổi điều khoản này</strong><br>
            Tôi có thể cập nhật Điều khoản Sử dụng này theo thời gian. Mọi thay đổi sẽ được đăng trên trang này với ngày cập nhật mới.
            <br><br>
            Nếu bạn có bất kỳ câu hỏi nào về Điều khoản Sử dụng này, vui lòng liên hệ với tôi qua liên kết "Gửi Câu Hỏi" ở footer.
        `,
        askQuestion: "Liên Hệ Với Tôi",
        copyright: "© 2025 Duck CIT",
        modalTitle: "Liên Hệ Với Tôi",
        modalDesc: "Tôi rất mong được nghe từ bạn! Dù bạn có câu hỏi, muốn hợp tác hay chỉ đơn giản muốn chào hỏi, hãy cứ liên hệ. Tôi sẽ phản hồi bạn sớm nhất có thể.",
        namePlaceholder: "Tên của bạn",
        emailPlaceholder: "Email của bạn",
        questionPlaceholder: "Câu hỏi của bạn",
        submitButton: "Gửi câu hỏi",
        pricingTitle: "Giá Cả",
        pricingSubtitle: "Mở khóa quyền truy cập vào tất cả các dự án sáng tạo của tôi",
        pricingCurrency: "$",
        pricingPrice: "0",
        pricingDescription: "Hoàn toàn miễn phí, bây giờ và mãi mãi - bao gồm tất cả các cập nhật trong tương lai",
        pricingNote: "* Nếu bạn muốn thể hiện chút tình cảm, một khoản đóng góp 1 đồng cũng sẽ khiến tôi vui cả ngày (nhưng không ép buộc đâu, thật đấy).",
        projectsTitle: "Dự Án Của Tôi",
        projectsLoading: "Đang tải dự án...",
        projectsError: "Lỗi khi tải dự án. Vui lòng thử lại sau.",
        noDescription: "Không có mô tả",
        viewOnGitHub: "Xem trên GitHub",
        stars: "sao",
        forks: "nhánh"
    }
};

// Language management
let currentLang = localStorage.getItem('currentLang') || 'en';

// Update page content with selected language
function updateContent(lang) {
    const translatableIds = [
        'who', 'desc', 'project', 'subtitle', 'donate', 'openSource',
        'myProjects', 'privacyPolicy', 'privacyPolicyTitle', 'privacyPolicyDesc',
        'termsOfUse', 'termsOfUseTitle', 'termsOfUseDesc', 'askQuestion', 'copyright',
        'pricingTitle', 'pricingSubtitle', 'pricingDescription', 'pricingNote',
        'projectsTitle'
    ];

    translatableIds.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            element.innerHTML = id === 'askQuestion' ? `<i class="fas fa-question-circle"></i> ${translations[lang][id]}` : translations[lang][id];
        }
    });

    const pricingCurrency = document.getElementById('pricingCurrency');
    const pricingPrice = document.getElementById('pricingPrice');
    if (pricingCurrency && pricingPrice) {
        pricingCurrency.textContent = translations[lang].pricingCurrency;
        pricingPrice.textContent = translations[lang].pricingPrice;
    }

    const modalTitle = document.getElementById('modalTitle');
    if (modalTitle) {
        document.getElementById('modalTitle').textContent = translations[lang].modalTitle;
        document.getElementById('modalDesc').textContent = translations[lang].modalDesc;
        document.getElementById('name').placeholder = translations[lang].namePlaceholder;
        document.getElementById('email').placeholder = translations[lang].emailPlaceholder;
        document.getElementById('question').placeholder = translations[lang].questionPlaceholder;
        document.getElementById('questionForm').querySelector('button').textContent = translations[lang].submitButton;
    }

    const langIndicator = document.getElementById('lang');
    if (langIndicator) {
        langIndicator.textContent = lang.toUpperCase();
    }

    if (window.location.pathname === '/projects' && typeof window.loadProjects === 'function') {
        window.loadProjects();
    }

    const loadingText = document.getElementById('projectsLoading');
    if (loadingText) {
        loadingText.textContent = translations[lang].projectsLoading;
    }
}

// Language toggle event handler
document.addEventListener('click', (e) => {
    if (e.target.closest('#langBtn')) {
        const spinner = document.getElementById('spinner');
        const lang = document.getElementById('lang');
        
        if (spinner && lang) {
            spinner.style.display = 'inline-block';
            lang.style.display = 'none';

            setTimeout(() => {
                currentLang = currentLang === 'en' ? 'vi' : 'en';
                localStorage.setItem('currentLang', currentLang);
                
                updateContent(currentLang);
                
                spinner.style.display = 'none';
                lang.style.display = 'inline-block';
            }, 500);
        }
    }
});

// Initialize translations
document.addEventListener('DOMContentLoaded', () => {
    updateContent(currentLang);
});